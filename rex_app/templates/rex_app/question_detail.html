{% extends 'rex_app/base.html' %}

	{% block content %}
	{% load humanize %}
	<head>
		<title>Question {{question.pk}}</title>
	</head>


	<div class="card text-center bg-light">
		<h3 class="bg-light">Question</h3>
        <h4 class="text-right">&nbsp&nbsp&nbsp&nbsp<a href="{% url 'edit_question' question.pk %}" class="btn btn-outline-info btn-sm">Edit question</a></h4>			  			  	
		{{question}} {{question.tag.all|join:','}}<br>
		<p style="text-align:right">Asked by {{question.asked_by}}  <i class="{{user.userattribute.get_avatar_display}}"></i> {{question.date|naturaltime}}</p>
	</div>

	<div class="card">
	  	<div class="card-header bg-light">
	    	<h4>Answers&nbsp&nbsp&nbsp&nbsp<a href="{% url 'create_answer' question.pk %}" class="btn btn-outline-info">Make a new answer</a></h4>
	  	</div>
	</div>

	{% for answer in question.answer_set.all %}
		<div class="card mb-3 bg-light">
			<div class="row no-gutters">	
				<div class="col-sm-2 bg-light">
					<div class"card">
						<div class="card-header">
							Upvotes: {{answer.upvotes}}
						</div>

						<div class="card-body">
							<form method="post" action="{% url 'upvote' answer.pk %}">
								{% csrf_token %}
								<input class="btn btn-outline-success btn-sm" type="submit" name="submit_mode" value="Upvote">
							</form>

							<form method="post" action="{% url 'downvote' answer.pk %}">
								{% csrf_token %}
								<input class="btn btn-outline-danger btn-sm" type="submit" name="submit_mode" value="Downvote">
							</form>

							<form method="post" action="{% url 'accept' answer.pk %}">
								{% csrf_token %}
								<input class="btn btn-outline-info btn-sm" type="submit" name="submit_mode" value="Mark Accepted">
							</form>
						</div>
					</div>
				</div>

				<div class="col-sm-8 bg-light">
					<div class="card border-left">


						<div class="card-header tbg-light">
							{% if answer.accepted %}
					  	  		Accepted Answer			
							{% endif %}

                            <h4 class="text-right"> &nbsp&nbsp&nbsp&nbsp<a href="{% url 'edit_answer' answer.pk %}" class="btn btn-outline-info btn-sm">Edit answer</a></h4>				  	  	
					  	</div>




					  	<div class="card-body bg-light">
					    	<h5 class="card-title">{{answer.text}}</h5>
							<p style="text-align:right">Answered by {{answer.answered_by}}  <i class="{{user.userattribute.get_avatar_display}}"></i> {{answer.date|naturaltime}}</p>

						    {% for comment in answer.comment_set.all %}
								<p>{{comment}} --{{comment.commented_by}}  <i class="{{user.userattribute.get_avatar_display}}"></i> {{comment.date|naturaltime}}</p><br>
							{% endfor %}
							<a href="{% url 'create_comment' answer.pk %}" class="btn btn-outline-info">Make a new comment</a>	

					  	</div>

					</div>
				</div>
			</div>
		</div>
	{% endfor %}




{% endblock content %}
